---
layout: post
title: PostgreSQL quick notes
published: true
tags: psql postgresql 
---

# Installing on OSX

Easiest to install and launch with `brew` (you can replace `start` with `restart`)

```
brew doctor
brew update
brew install postgresql
brew services start postgresql
```

# `psql`

⚠️ Note that `postgres` and `psql` are different tools, the former being the actual service, the latter being a shell-like service revolving around a backslash syntax (e.g. `\list` for all databases).

Starting work on a new project, and trying to remember how to deal with `psql`:
* `psql -l` to list existing databases
* `psql -d database` to connect to it, `\c database` to connect to other database, `\dt` to list tables etc.
* `rake db:schema:load test` (to create `schema.rb` in `test` environment and database)

Use `initdb` to create a new cluster (`export PGDATA=/usr/local/var/postgres` before, and potentially with `--locale en_US.UTF-8` if system language is different) and `createdb name` to fill it. To create new users, run `psql` and then `CREATE ROLE test_role LOGIN SUPERUSER;`.

Within `psql`, use `\dt` to list tables.

# `pgAdmin`

To connect to `pgAdmin`, select `add server` and enter the default values (user can be found with `psql -d postgres` and `\du`)

<img width="508" alt="Capture d’écran 2021-05-11 à 16 06 15" src="https://user-images.githubusercontent.com/11438440/117829331-f583bf00-b272-11eb-8de8-fd0377440161.png">
